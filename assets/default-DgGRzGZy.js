import{p as M,v as X,s as _,c as h,a9 as O,w as P,o as Z,b as G,g as j,q as K,u as Q,y as ee,t as $,A as q,F as te,L as a,M as I,d as ae,j as le,m as oe,aa as ne,ab as se,U as J,ac as re,ad as ue,ae as ie,B as ce,D as de,E as ve,af as me,J as ge,ag as fe,ah as he,ai as be,aj as ye,a5 as R,ak as Se,S as pe,R as ke,W as Ve,X as A,Y as l,P as H,Z as we,_ as Be,$ as p,a7 as x,a3 as f,a4 as V,al as _e,a2 as T,am as E,a1 as F,a0 as N,an as Ce,V as xe,a8 as Te}from"./index-DhmPxDvU.js";import Ie from"./footer-CrrOA-oW.js";import{m as Le,V as D}from"./VToolbar-JFxVWhAM.js";import{u as Pe,V as Y,a as B}from"./VList-Bu75zoQN.js";import{V as Ae}from"./VMain-DofDhll7.js";import{V as He}from"./VRow-BMljVhGm.js";import{V as W}from"./VMenu-BwVogdmA.js";import{V as Ne}from"./VDivider-D1v1YBr1.js";const Re=M({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function $e(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=c;let b=0,g=0;const o=X(null),v=_(0),m=_(0),y=_(0),k=_(!1),u=_(!1),s=h(()=>Number(e.scrollThreshold)),i=h(()=>O((s.value-v.value)/s.value||0)),S=()=>{const t=o.value;if(!t||n&&!n.value)return;b=v.value,v.value="window"in t?t.pageYOffset:t.scrollTop;const d=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(g!==d){g=d;return}u.value=v.value<b,y.value=Math.abs(v.value-s.value)};return P(u,()=>{m.value=m.value||v.value}),P(k,()=>{m.value=0}),Z(()=>{P(()=>e.scrollTarget,t=>{var w;const d=t?document.querySelector(t):window;d&&d!==o.value&&((w=o.value)==null||w.removeEventListener("scroll",S),o.value=d,o.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),G(()=>{var t;(t=o.value)==null||t.removeEventListener("scroll",S)}),n&&P(n,S,{immediate:!0}),{scrollThreshold:s,currentScroll:v,currentThreshold:y,isScrollActive:k,scrollRatio:i,isScrollingUp:u,savedScroll:m}}const Ee=M({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Le(),...te(),...Re(),height:{type:[Number,String],default:64}},"VAppBar"),Me=j()({name:"VAppBar",props:Ee(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:n}=c;const b=X(),g=K(e,"modelValue"),o=h(()=>{var C;const r=new Set(((C=e.scrollBehavior)==null?void 0:C.split(" "))??[]);return{hide:r.has("hide"),fullyHide:r.has("fully-hide"),inverted:r.has("inverted"),collapse:r.has("collapse"),elevate:r.has("elevate"),fadeImage:r.has("fade-image")}}),v=h(()=>{const r=o.value;return r.hide||r.fullyHide||r.inverted||r.collapse||r.elevate||r.fadeImage||!g.value}),{currentScroll:m,scrollThreshold:y,isScrollingUp:k,scrollRatio:u}=$e(e,{canScroll:v}),s=h(()=>o.value.hide||o.value.fullyHide),i=h(()=>e.collapse||o.value.collapse&&(o.value.inverted?u.value>0:u.value===0)),S=h(()=>e.flat||o.value.fullyHide&&!g.value||o.value.elevate&&(o.value.inverted?m.value>0:m.value===0)),t=h(()=>o.value.fadeImage?o.value.inverted?1-u.value:u.value:void 0),d=h(()=>{var U,z;if(o.value.hide&&o.value.inverted)return 0;const r=((U=b.value)==null?void 0:U.contentHeight)??0,C=((z=b.value)==null?void 0:z.extensionHeight)??0;return s.value?m.value<y.value||o.value.fullyHide?r+C:r:r+C});Q(h(()=>!!e.scrollBehavior),()=>{ae(()=>{s.value?o.value.inverted?g.value=m.value>y.value:g.value=k.value||m.value<y.value:g.value=!0})});const{ssrBootStyles:w}=Pe(),{layoutItemStyles:L}=ee({id:e.name,order:h(()=>parseInt(e.order,10)),position:$(e,"location"),layoutSize:d,elementSize:_(void 0),active:g,absolute:$(e,"absolute")});return q(()=>{const r=D.filterProps(e);return a(D,I({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...L.value,"--v-toolbar-image-opacity":t.value,height:void 0,...w.value},e.style]},r,{collapse:i.value,flat:S.value}),n)}),{}}}),Ue=M({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:fe,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ge(),...me({location:"top end"}),...ve(),...de(),...ce(),...ie({transition:"scale-rotate-transition"})},"VBadge"),ze=j()({name:"VBadge",inheritAttrs:!1,props:Ue(),setup(e,c){const{backgroundColorClasses:n,backgroundColorStyles:b}=le($(e,"color")),{roundedClasses:g}=oe(e),{t:o}=ne(),{textColorClasses:v,textColorStyles:m}=se($(e,"textColor")),{themeClasses:y}=J(),{locationStyles:k}=re(e,!0,u=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(u)?+(e.offsetY??0):["left","right"].includes(u)?+(e.offsetX??0):0));return q(()=>{const u=Number(e.content),s=!e.max||isNaN(u)?e.content:u<=+e.max?u:`${e.max}+`,[i,S]=ue(c.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(e.tag,I({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var t,d;return[a("div",{class:"v-badge__wrapper"},[(d=(t=c.slots).default)==null?void 0:d.call(t),a(he,{transition:e.transition},{default:()=>{var w,L;return[be(a("span",I({class:["v-badge__badge",y.value,n.value,g.value,v.value],style:[b.value,m.value,e.inline?{}:k.value],"aria-atomic":"true","aria-label":o(e.label,u),"aria-live":"polite",role:"status"},i),[e.dot?void 0:c.slots.badge?(L=(w=c.slots).badge)==null?void 0:L.call(w):e.icon?a(R,{icon:e.icon},null):s]),[[ye,e.modelValue]])]}})])]}})}),{}}}),Fe={__name:"default",setup(e){const{t:c}=pe(),n=ke(),{apiAuth:b}=Te(),g=Ve(),o=we(),v=J(),m=h(()=>[{to:"/register",text:c("nav.register"),icon:"mdi-account-plus",show:!n.isLoggedIn},{to:"/login",text:c("nav.login"),icon:"mdi-account-arrow-left",show:!n.isLoggedIn},{to:"/cart",text:c("nav.cart"),icon:"mdi-book",show:n.isLoggedIn},{to:"/orders",text:c("nav.orders"),icon:"mdi-format-list-bulleted",show:n.isLoggedIn},{to:"/admin",text:c("nav.admin"),icon:"mdi-cog",show:n.isLoggedIn&&n.isAdmin}]),y=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],k=async()=>{try{await b.delete("/user/logout")}catch(s){console.log(s)}n.logout(),g({text:c("logout.success"),snackbarProps:{color:"green"}}),o.push("/")};function u(){v.global.name.value=v.global.current.value.dark?"light":"dark"}return(s,i)=>{const S=Be("router-view");return p(),A(H,null,[a(Me,null,{default:l(()=>[a(He,{class:"d-flex align-center"},{default:l(()=>[a(x,{to:"/",active:!1},{default:l(()=>i[0]||(i[0]=[f("本是同根生")])),_:1}),a(x,{"prepend-icon":"mdi-book-heart",to:"/larp"},{default:l(()=>[f(V(s.$t("nav.larp")),1)]),_:1}),a(x,{"prepend-icon":"mdi-book-marker",to:"/larplocation"},{default:l(()=>[f(V(s.$t("nav.larplocation")),1)]),_:1}),a(x,{"prepend-icon":"mdi-book-search",to:"/larpword"},{default:l(()=>[f(V(s.$t("nav.larpword")),1)]),_:1}),a(_e),a(W,{class:"text-center",width:"200px","open-on-hover":""},{activator:l(({props:t})=>[a(x,I(t,{icon:""}),{default:l(()=>[a(Ce,{size:"40"},{default:l(()=>[N(n).avatar?(p(),T(xe,{key:0,src:N(n).avatar,alt:"User Avatar"},null,8,["src"])):(p(),T(R,{key:1,size:"40"},{default:l(()=>i[1]||(i[1]=[f("mdi-account")])),_:1}))]),_:1})]),_:2},1040)]),default:l(()=>[a(Y,null,{default:l(()=>[(p(!0),A(H,null,F(m.value,t=>(p(),A(H,null,[t.show?(p(),T(B,{key:t.to,to:t.to,"prepend-icon":t.icon},{default:l(()=>{var d;return[f(V(t.text)+" ",1),t.to==="/cart"?(p(),T(ze,{key:0,content:((d=N(n).cart)==null?void 0:d.length)||0,floating:"",color:"red"},null,8,["content"])):E("",!0)]}),_:2},1032,["to","prepend-icon"])):E("",!0)],64))),256)),N(n).isLoggedIn?(p(),T(B,{key:0,onClick:k},{prepend:l(()=>[a(R,null,{default:l(()=>i[2]||(i[2]=[f("mdi-account-arrow-right")])),_:1})]),default:l(()=>[f(" "+V(s.$t("nav.logout")),1)]),_:1})):E("",!0),a(Ne),a(B,{onClick:u},{prepend:l(()=>[a(R,null,{default:l(()=>i[3]||(i[3]=[f("mdi-theme-light-dark")])),_:1})]),default:l(()=>[f(" "+V(s.$t("nav.switch")),1)]),_:1}),a(B,null,{default:l(()=>[a(W,{location:"end","open-on-hover":""},{activator:l(({props:t})=>[a(B,I(t,{"prepend-icon":"mdi-translate"}),{default:l(()=>i[4]||(i[4]=[f(V("翻譯"))])),_:2},1040)]),default:l(()=>[a(Y,null,{default:l(()=>[(p(),A(H,null,F(y,t=>a(B,{key:t.value,onClick:d=>s.$i18n.locale=t.value},{default:l(()=>[f(V(t.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Ae,{class:"content-area"},{default:l(()=>[a(S)]),_:1}),a(Ie)],64)}}},Ze=Se(Fe,[["__scopeId","data-v-d7c2378a"]]);export{Ze as default};
