import{p as M,v as X,s as C,c as h,a9 as O,w as L,o as Z,b as G,g as j,q as K,u as Q,y as ee,t as R,A as q,F as te,L as t,M as $,d as ae,j as le,m as oe,aa as ne,ab as se,U as J,ac as re,ad as ue,ae as ie,B as de,D as ce,E as ve,af as me,J as fe,ag as ge,ah as he,ai as be,aj as ye,a5 as p,ak as Se,S as ke,R as Ve,W as pe,X as A,Y as l,P as H,Z as we,_ as Be,$ as k,a7 as T,a3 as d,a4 as V,al as _e,a2 as I,am as E,a1 as F,a0 as N,an as Ce,ao as xe,ap as Te,V as Ie,a8 as Pe}from"./index-DmVHqK86.js";import Le from"./footer-CvCCkzvc.js";import{m as Ae,V as D}from"./VToolbar-BJI7kaF3.js";import{u as He,V as Y,a as _}from"./VList-CbSjJOY2.js";import{V as Ne}from"./VMain-COtiI5Oq.js";import{V as Re}from"./VRow-w2TbxwqS.js";import{V as W}from"./VMenu-CxrYZI7z.js";import{V as $e}from"./VDivider-CosHWVEo.js";const Ee=M({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Me(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:s}=c;let b=0,g=0;const o=X(null),m=C(0),f=C(0),y=C(0),w=C(!1),i=C(!1),r=h(()=>Number(e.scrollThreshold)),n=h(()=>O((r.value-m.value)/r.value||0)),S=()=>{const a=o.value;if(!a||s&&!s.value)return;b=m.value,m.value="window"in a?a.pageYOffset:a.scrollTop;const v=a instanceof Window?document.documentElement.scrollHeight:a.scrollHeight;if(g!==v){g=v;return}i.value=m.value<b,y.value=Math.abs(m.value-r.value)};return L(i,()=>{f.value=f.value||m.value}),L(w,()=>{f.value=0}),Z(()=>{L(()=>e.scrollTarget,a=>{var B;const v=a?document.querySelector(a):window;v&&v!==o.value&&((B=o.value)==null||B.removeEventListener("scroll",S),o.value=v,o.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),G(()=>{var a;(a=o.value)==null||a.removeEventListener("scroll",S)}),s&&L(s,S,{immediate:!0}),{scrollThreshold:r,currentScroll:m,currentThreshold:y,isScrollActive:w,scrollRatio:n,isScrollingUp:i,savedScroll:f}}const ze=M({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ae(),...te(),...Ee(),height:{type:[Number,String],default:64}},"VAppBar"),Ue=j()({name:"VAppBar",props:ze(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:s}=c;const b=X(),g=K(e,"modelValue"),o=h(()=>{var x;const u=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:u.has("hide"),fullyHide:u.has("fully-hide"),inverted:u.has("inverted"),collapse:u.has("collapse"),elevate:u.has("elevate"),fadeImage:u.has("fade-image")}}),m=h(()=>{const u=o.value;return u.hide||u.fullyHide||u.inverted||u.collapse||u.elevate||u.fadeImage||!g.value}),{currentScroll:f,scrollThreshold:y,isScrollingUp:w,scrollRatio:i}=Me(e,{canScroll:m}),r=h(()=>o.value.hide||o.value.fullyHide),n=h(()=>e.collapse||o.value.collapse&&(o.value.inverted?i.value>0:i.value===0)),S=h(()=>e.flat||o.value.fullyHide&&!g.value||o.value.elevate&&(o.value.inverted?f.value>0:f.value===0)),a=h(()=>o.value.fadeImage?o.value.inverted?1-i.value:i.value:void 0),v=h(()=>{var z,U;if(o.value.hide&&o.value.inverted)return 0;const u=((z=b.value)==null?void 0:z.contentHeight)??0,x=((U=b.value)==null?void 0:U.extensionHeight)??0;return r.value?f.value<y.value||o.value.fullyHide?u+x:u:u+x});Q(h(()=>!!e.scrollBehavior),()=>{ae(()=>{r.value?o.value.inverted?g.value=f.value>y.value:g.value=w.value||f.value<y.value:g.value=!0})});const{ssrBootStyles:B}=He(),{layoutItemStyles:P}=ee({id:e.name,order:h(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:v,elementSize:C(void 0),active:g,absolute:R(e,"absolute")});return q(()=>{const u=D.filterProps(e);return t(D,$({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...P.value,"--v-toolbar-image-opacity":a.value,height:void 0,...B.value},e.style]},u,{collapse:n.value,flat:S.value}),s)}),{}}}),Fe=M({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ge,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...fe(),...me({location:"top end"}),...ve(),...ce(),...de(),...ie({transition:"scale-rotate-transition"})},"VBadge"),De=j()({name:"VBadge",inheritAttrs:!1,props:Fe(),setup(e,c){const{backgroundColorClasses:s,backgroundColorStyles:b}=le(R(e,"color")),{roundedClasses:g}=oe(e),{t:o}=ne(),{textColorClasses:m,textColorStyles:f}=se(R(e,"textColor")),{themeClasses:y}=J(),{locationStyles:w}=re(e,!0,i=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(i)?+(e.offsetY??0):["left","right"].includes(i)?+(e.offsetX??0):0));return q(()=>{const i=Number(e.content),r=!e.max||isNaN(i)?e.content:i<=+e.max?i:`${e.max}+`,[n,S]=ue(c.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return t(e.tag,$({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var a,v;return[t("div",{class:"v-badge__wrapper"},[(v=(a=c.slots).default)==null?void 0:v.call(a),t(he,{transition:e.transition},{default:()=>{var B,P;return[be(t("span",$({class:["v-badge__badge",y.value,s.value,g.value,m.value],style:[b.value,f.value,e.inline?{}:w.value],"aria-atomic":"true","aria-label":o(e.label,i),"aria-live":"polite",role:"status"},n),[e.dot?void 0:c.slots.badge?(P=(B=c.slots).badge)==null?void 0:P.call(B):e.icon?t(p,{icon:e.icon},null):r]),[[ye,e.modelValue]])]}})])]}})}),{}}}),Ye={__name:"default",setup(e){const{t:c}=ke(),s=Ve(),{apiAuth:b}=Pe(),g=pe(),o=we(),m=J(),f=h(()=>[{to:"/register",text:c("nav.register"),icon:"mdi-account-plus",show:!s.isLoggedIn},{to:"/login",text:c("nav.login"),icon:"mdi-account-arrow-left",show:!s.isLoggedIn},{to:"/cart",text:c("nav.cart"),icon:"mdi-book",show:s.isLoggedIn},{to:"/orders",text:c("nav.orders"),icon:"mdi-format-list-bulleted",show:s.isLoggedIn},{to:"/admin",text:c("nav.admin"),icon:"mdi-cog",show:s.isLoggedIn&&s.isAdmin}]),y=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],w=async()=>{try{await b.delete("/user/logout")}catch(r){console.log(r)}s.logout(),g({text:c("logout.success"),snackbarProps:{color:"green"}}),o.push("/")};function i(){m.global.name.value=m.global.current.value.dark?"light":"dark"}return(r,n)=>{const S=Be("router-view");return k(),A(H,null,[t(Ue,null,{default:l(()=>[t(Re,{class:"d-flex align-center"},{default:l(()=>[t(T,{to:"/",active:!1},{default:l(()=>n[0]||(n[0]=[d("本是同根生")])),_:1}),t(T,{to:"/larp"},{default:l(()=>[t(p,{left:""},{default:l(()=>n[1]||(n[1]=[d("mdi-book-heart")])),_:1}),d(" "+V(r.$t("nav.larp")),1)]),_:1}),t(T,{to:"/larplocation"},{default:l(()=>[t(p,{left:""},{default:l(()=>n[2]||(n[2]=[d("mdi-book-marker")])),_:1}),d(" "+V(r.$t("nav.larplocation")),1)]),_:1}),t(T,{to:"/larpword"},{default:l(()=>[t(p,{left:""},{default:l(()=>n[3]||(n[3]=[d("mdi-book-search")])),_:1}),d(" "+V(r.$t("nav.larpword")),1)]),_:1}),t(_e),t(W,{class:"text-center",width:"200px","open-on-hover":""},{activator:l(({props:a})=>[t(T,$(a,{icon:""}),{default:l(()=>[t(Te,{size:"40"},{default:l(()=>[N(s).avatar?(k(),I(Ie,{key:0,src:N(s).avatar,alt:"User Avatar"},null,8,["src"])):(k(),I(p,{key:1,size:"40"},{default:l(()=>n[4]||(n[4]=[d("mdi-account")])),_:1}))]),_:1})]),_:2},1040)]),default:l(()=>[t(Y,null,{default:l(()=>[(k(!0),A(H,null,F(f.value,a=>(k(),A(H,null,[a.show?(k(),I(_,{key:a.to,to:a.to},{prepend:l(()=>[t(p,null,{default:l(()=>[d(V(a.icon),1)]),_:2},1024)]),default:l(()=>{var v;return[d(" "+V(a.text)+" ",1),a.to==="/cart"?(k(),I(De,{key:0,content:((v=N(s).cart)==null?void 0:v.length)||0,floating:"",color:"red"},null,8,["content"])):E("",!0)]}),_:2},1032,["to"])):E("",!0)],64))),256)),N(s).isLoggedIn?(k(),I(_,{key:0,onClick:w},{prepend:l(()=>[t(p,null,{default:l(()=>n[5]||(n[5]=[d("mdi-account-arrow-right")])),_:1})]),default:l(()=>[d(" "+V(r.$t("nav.logout")),1)]),_:1})):E("",!0),t($e),t(_,{onClick:i},{prepend:l(()=>[t(p,null,{default:l(()=>n[6]||(n[6]=[d("mdi-theme-light-dark")])),_:1})]),default:l(()=>[d(" "+V(r.$t("nav.switch")),1)]),_:1}),t(_,null,{default:l(()=>[t(W,{location:"end","open-on-hover":""},{activator:l(({props:a})=>[t(_,Ce(xe(a)),{default:l(()=>[t(p,{left:""},{default:l(()=>n[7]||(n[7]=[d("mdi-translate")])),_:1}),n[8]||(n[8]=d(" "+V("翻譯")))]),_:2},1040)]),default:l(()=>[t(Y,null,{default:l(()=>[(k(),A(H,null,F(y,a=>t(_,{key:a.value,onClick:v=>r.$i18n.locale=a.value},{default:l(()=>[d(V(a.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Ne,{class:"content-area"},{default:l(()=>[t(S)]),_:1}),t(Le)],64)}}},Ke=Se(Ye,[["__scopeId","data-v-1850cca3"]]);export{Ke as default};
