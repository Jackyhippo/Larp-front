import{S as P,W as T,Z as E,v as B,a8 as F,a2 as N,$ as I,Y as u,L as r,a6 as b,a4 as f,aR as S,a0 as e,aQ as t,a7 as y,a3 as C}from"./index-Cm7_cx15.js";import{c as L,a as v,g as D,u as j,e as c,V as M}from"./index.esm-DjYZALxb.js";import{v as A}from"./index-D0zhJW1l.js";import{b as U}from"./route-block-B_A1xBdJ.js";import{a as O,b as w,V as Q}from"./VRow-CKhcj0fS.js";import{V as W}from"./VDivider-CXKQV0dB.js";import{V as Y}from"./VCheckbox-CeHBtxAo.js";import"./VCheckboxBtn-DOy8uNY-.js";const Z={class:"text-center"},z={class:"text-center"},G={class:"text-center"},H={__name:"register",setup(J){const{t:o}=P(),{api:k}=F(),$=T(),q=E(),x=L({account:v().required(o("api.userAccountRequired")).min(4,o("api.userAccountTooShort")).max(20,o("api.userAccountTooLong")).test("isAlphanumeric",o("api.userAccountInvalid"),s=>A.isAlphanumeric(s)),email:v().required(o("api.userEmailRequired")).test("isEmail",o("api.userEmailInvalid"),s=>A.isEmail(s)),password:v().required(o("api.userPasswordRequired")).min(4,o("api.userPasswordTooShort")).max(20,o("api.userPasswordTooLong")),passwordConfirm:v().required(o("api.passwordConfirmRequired")).oneOf([D("password")],o("api.userPasswordNotMatch"))}),{handleSubmit:R,isSubmitting:p}=j({validationSchema:x}),n=c("account"),i=c("email"),m=c("password"),d=c("passwordConfirm"),V=B(!1),h=R(async s=>{var a,l;try{await k.post("/user",{account:s.account,email:s.email,password:s.password,role:V.value?1:0}),$({text:o("register.success"),snackbarProps:{color:"green"}}),q.push("/login")}catch(g){console.log(g),$({text:o("api."+(((l=(a=g==null?void 0:g.response)==null?void 0:a.data)==null?void 0:l.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(s,a)=>(I(),N(Q,null,{default:u(()=>[r(O,{justify:"center"},{default:u(()=>[r(w,{cols:"6"},{default:u(()=>[b("h1",Z,f(s.$t("nav.register")),1)]),_:1}),r(W),r(w,{cols:"6",sm:"4"},{default:u(()=>[r(M,{disabled:e(p),onSubmit:S(e(h),["prevent"])},{default:u(()=>[r(t,{modelValue:e(n).value.value,"onUpdate:modelValue":a[0]||(a[0]=l=>e(n).value.value=l),"error-messages":e(n).errorMessage.value,label:s.$t("user.account"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(i).value.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e(i).value.value=l),"error-messages":e(i).errorMessage.value,label:s.$t("user.email")},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(m).value.value,"onUpdate:modelValue":a[2]||(a[2]=l=>e(m).value.value=l),type:"password","error-messages":e(m).errorMessage.value,label:s.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(d).value.value,"onUpdate:modelValue":a[3]||(a[3]=l=>e(d).value.value=l),type:"password","error-messages":e(d).errorMessage.value,label:s.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),b("div",z,[r(y,{loading:e(p),type:"submit",color:"green"},{default:u(()=>[C(f(s.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1}),r(w,{cols:"6",sm:"4"},{default:u(()=>[r(M,{disabled:e(p),onSubmit:S(e(h),["prevent"])},{default:u(()=>[r(t,{modelValue:e(n).value.value,"onUpdate:modelValue":a[4]||(a[4]=l=>e(n).value.value=l),"error-messages":e(n).errorMessage.value,label:s.$t("user.account"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(i).value.value,"onUpdate:modelValue":a[5]||(a[5]=l=>e(i).value.value=l),"error-messages":e(i).errorMessage.value,label:s.$t("user.email")},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(m).value.value,"onUpdate:modelValue":a[6]||(a[6]=l=>e(m).value.value=l),type:"password","error-messages":e(m).errorMessage.value,label:s.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),r(t,{modelValue:e(d).value.value,"onUpdate:modelValue":a[7]||(a[7]=l=>e(d).value.value=l),type:"password","error-messages":e(d).errorMessage.value,label:s.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),r(Y,{modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=l=>V.value=l),label:s.$t("user.isAdmin")},null,8,["modelValue","label"]),b("div",G,[r(y,{loading:e(p),type:"submit",color:"green"},{default:u(()=>[C(f(s.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof U=="function"&&U(H);export{H as default};
